#select year
year <- sub("raster/MODIS_ndvi/ndvi_yrly_avg/ndvi_", "", rasterlist[i])
year <- as.numeric(strsplit(year, ".tif")[[1]][1])
#load raster
raster <- raster(rasterlist[i])
#create data frame (year, desert, ndvi) by extracting raster values using FUNCTION = mean to desert polygon
for (j in 1:length(data_lst)) {
desert <- data_lst[[j]]$Desert
ndvi <- raster::extract(raster, data_lst[[j]], fun = mean, na.rm = TRUE)
df[nrow(df) + 1,] = c(year, desert, ndvi[1,1])
}
}
for (i in 1:length(rasterlist)) {
#select year
year <- sub("raster/MODIS_ndvi/ndvi_yrly_avg/ndvi_", "", rasterlist[i])
year <- as.numeric(strsplit(year, ".tif")[[1]][1])
#load raster
raster <- raster(rasterlist[i])
#create data frame (year, desert, ndvi) by extracting raster values using FUNCTION = mean to desert polygon
for (j in 1:length(data_lst)) {
desert <- data_lst[[j]]$desert
ndvi <- raster::extract(raster, data_lst[[j]], fun = mean, na.rm = TRUE)
df[nrow(df) + 1,] = c(year, desert, ndvi[1,1])
}
}
view(df)
warnings()
View(ndvi)
mean(ndvi)
for (i in 1:length(rasterlist)) {
#select year
year <- sub("raster/MODIS_ndvi/ndvi_yrly_avg/ndvi_", "", rasterlist[i])
year <- as.numeric(strsplit(year, ".tif")[[1]][1])
#load raster
raster <- raster(rasterlist[i])
#create data frame (year, desert, ndvi) by extracting raster values using FUNCTION = mean to desert polygon
for (j in 1:length(data_lst)) {
desert <- data_lst[[j]]$desert
ndvi <- raster::extract(raster, data_lst[[j]], fun = mean, na.rm = TRUE)
df[nrow(df) + 1,] = c(year, desert, mean(ndvi))
}
}
view(df)
desert
desert <- data_lst[[3]]$desert[1,]
desert <- data_lst[[3]]$desert[,1]
names(data_lst[[1]] <- "San Joaquin"
names(data_lst[[1]]) <- "San Joaquin"
names(data_lst[[1]]) <- "San Joaquin"
names(data_lst[[1]]) <- "San Joaquin"
names(data_lst[[2]]) <- "Mojave"
names(data_lst[[3]]) <- "Sonoran"
names(data_lst)
names(data_lst[3]) <- "Sonoran"
names(data_lst[1]) <- "San Joaquin"
names(data_lst[2]) <- "Mojave"
names(data_lst)
#subset data by desert and store in list
data_lst[[1]] <- data %>% filter(desert == "San Joaquin")
data_lst[[2]] <- data %>% filter(desert == "Mojave")
data_lst[[3]] <- data %>% filter(desert == "Sonoran")
names(data_lst[1]) <- "San Joaquin"
names(data_lst[2]) <- "Mojave"
names(data_lst[3]) <- "Sonoran"
names(data_lst)
desert <- data_lst[[j]]$desert
desert <- data_lst[[3]]$desert
desert
desert[1,]
desert[,1]
desert[1]
data_lst <- list()
df <- data.frame() %>%
mutate(year= as.numeric(), desert = as.character(), ndvi = as.numeric())
#subset data by desert and store in list
data_lst[[1]] <- data %>% filter(desert == "San Joaquin")
data_lst[[2]] <- data %>% filter(desert == "Mojave")
data_lst[[3]] <- data %>% filter(desert == "Sonoran")
for (i in 1:length(rasterlist)) {
#select year
year <- sub("raster/MODIS_ndvi/ndvi_yrly_avg/ndvi_", "", rasterlist[i])
year <- as.numeric(strsplit(year, ".tif")[[1]][1])
#load raster
raster <- raster(rasterlist[i])
#create data frame (year, desert, ndvi) by extracting raster values using FUNCTION = mean to desert polygon
for (j in 1:length(data_lst)) {
desert <- data_lst[[j]]$desert
ndvi <- raster::extract(raster, data_lst[[j]], fun = mean, na.rm = TRUE)
df[nrow(df) + 1,] = c(year, desert[1], mean(ndvi))
}
}
df$year <- as.numeric(df$year)
df$ndvi <- as.numeric(df$ndvi)
View(df)
View(df)
write_csv(df, "data/mean_ndvi_burned.csv")
library(tidyverse)
library(tidyverse)
library(mgcv)
library(tidyverse)
library(mgcv)
setwd("~/GitHub/desert-fires-impact-biodiversity")
animals <- read_csv("data/animals_2022_v4.csv") %>%
select(-c(basisOfRecord, institutionCode)) %>%
filter(obsYear < 2021)
setwd("~/GitHub/desert-fires-impact-biodiversity")
animals <- read_csv("data/animals_2022_v4.csv") %>%
select(-c(basisOfRecord, institutionCode)) %>%
filter(obsYear < 2021)
#remove duplicates
data <- animals %>%
group_by(obsYear, treatmentGroup, desert) %>%
summarize(totalObs = n())
head(data)
setwd("~/GitHub/desert-fires-impact-biodiversity")
ndvi_burned <- read_csv("data/mean_ndvi_burned.csv")
ndvi_nb <- read_csv("data/mean_ndvi.csv")
head(data)
#remove duplicates
data <- animals %>%
group_by(obsYear, treatmentGroup, desert) %>%
summarize(totalObs = n()) %>%
filter(treatmentGroup != "burned prior 2000")
head(data)
ndvi_burned <- read_csv("data/mean_ndvi_burned.csv") %>%
mutate(treatmentGroup = "burned")
ndvi_nb <- read_csv("data/mean_ndvi.csv") %>%
mutate(treatmentGroup = "never burned")
ndvi <- rbind(ndvi_burned, ndvi_nb)
ndvi <- rbind(ndvi_burned, ndvi_nb) %>%
rename(yearObs = year)
ndvi_burned <- read_csv("data/mean_ndvi_burned.csv") %>%
mutate(treatmentGroup = "burned")
ndvi_nb <- read_csv("data/mean_ndvi.csv") %>%
mutate(treatmentGroup = "never burned")
ndvi <- rbind(ndvi_burned, ndvi_nb) %>%
rename(obsYear = year)
data <- left_join(data, ndvi, by = c("desert", "obsYear", "treatmentGroup"))
head(data)
ndvi
summary(data)
animals <- read_csv("data/animals_2022_v4.csv") %>%
select(-c(basisOfRecord, institutionCode)) %>%
filter(obsYear >1999, obsYear < 2021)
ndvi_burned <- read_csv("data/mean_ndvi_burned.csv") %>%
mutate(treatmentGroup = "burned")
ndvi_nb <- read_csv("data/mean_ndvi.csv") %>%
mutate(treatmentGroup = "never burned")
ndvi <- rbind(ndvi_burned, ndvi_nb) %>%
rename(obsYear = year)
#remove duplicates
data <- animals %>%
group_by(obsYear, treatmentGroup, desert) %>%
summarize(totalObs = n()) %>%
filter(treatmentGroup != "burned prior 2000")
data <- left_join(data, ndvi, by = c("desert", "obsYear", "treatmentGroup"))
head(data)
avg_ndvi <- data %>% group_by(treatmentGroup, desert) %>% summarize(avg_ndvi = mean(ndvi))
plot(avg_ndvi)
ggplot(avg_ndvi, aes(x = desert, y - avg_ndvi, shape = treatmentGroup)) +
geom_point()
ggplot(avg_ndvi, aes(x = desert, y = avg_ndvi, shape = treatmentGroup)) +
geom_point()
fireid <- unique(animals$fireID)
animals <- read_csv("shapefiles/animals_v3/animals_v3.shp") %>%
filter(obsYear >1999, obsYear < 2021)
animals <- st_read("shapefiles/animals_v3/animals_v3.shp") %>%
filter(obsYear >1999, obsYear < 2021)
animals <- st_read("shapefiles/animals_v3/animals_v3.shp") %>%
filter(obsYear >1999, obsYear < 2021)
animals <- st_read("shapefiles/animals_v3/animals_v3.shp") %>%
filter(obsYear >1999, obsYear < 2021)
animals <- st_read("shapefiles/animals_v3/animals_v3.shp")
animals <- as.dataframe(st_read("shapefiles/animals_v3/animals_v3.shp"))
animals <- st_read("shapefiles/animals_v3/animals_v3.shp")
animals <- st_read("shapefiles/animals_v3/animals_v3.shp") %>%
st_drop_geometry()
ndvi_burned <- read_csv("data/mean_ndvi_burned.csv") %>%
mutate(treatmentGroup = "burned")
ndvi_nb <- read_csv("data/mean_ndvi.csv") %>%
mutate(treatmentGroup = "never burned")
ndvi <- rbind(ndvi_burned, ndvi_nb) %>%
rename(obsYear = year)
data <- animals %>%
group_by(obsYear, treatmentGroup, desert) %>%
summarize(totalObs = n()) %>%
filter(treatmentGroup != "burned prior 2000")
colnames(names)\
colnames(animals)
animals <- st_read("shapefiles/animals_v3/animals_v3.shp") %>%
st_drop_geometry() %>%
rename(obsID = TARGET_FID, order = order_, individualCount = individual, obsDay = day, obsMonth = month, obsYear = year, institutionalCode = institutio, treatmentGroup = treatmentG, fireName = INCIDENT, fireYear = FIRE_YEARn, fireSize = GISAcres) %>%
select(-c("verbatimSc", "issue", "coordinate", 'nearRd_FID', "nearUA_FID"))
colnames(animals)
data <- animals %>%
group_by(obsYear, treatmentGroup, desert) %>%
summarize(totalObs = n()) %>%
filter(treatmentGroup != "burned prior 2000")
data <- left_join(data, ndvi, by = c("desert", "obsYear", "treatmentGroup"))
head(data)
animals <- st_read("shapefiles/animals_v3/animals_v3.shp") %>%
st_drop_geometry() %>%
rename(obsID = TARGET_FID, order = order_, individualCount = individual, obsDay = day, obsMonth = month, obsYear = year, institutionalCode = institutio, treatmentGroup = treatmentG, fireName = INCIDENT, fireYear = FIRE_YEARn, fireSize = GISAcres) %>%
select(-c("verbatimSc", "issue", "coordinate", 'nearRd_FID', "nearUA_FID")) %>%
filter(obsYear > 1999, obsYear < 2021 )
data <- animals %>%
group_by(obsYear, treatmentGroup, desert) %>%
summarize(totalObs = n()) %>%
filter(treatmentGroup != "burned prior 2000")
data <- left_join(data, ndvi, by = c("desert", "obsYear", "treatmentGroup"))
head(data)
avg_ndvi <- data %>% group_by(treatmentGroup, desert) %>% summarize(avg_ndvi = mean(ndvi))
ggplot(avg_ndvi, aes(x = desert, y = avg_ndvi, shape = treatmentGroup)) +
geom_point()
fireid <- unique(animals$fireID)
fire_area <- st_read("shapefiles/fires/fires2000.shp") %>% #polygons for never-burned desert sites
st_transform(crs = 4326) %>% #transform data to wgs84 to match raster
filter(fireID %in% fireid)
library(raster)
tempdir()
dir.create(tempdir())
fire_area <- shapefile("shapefiles/fires/fires2000.shp") %>% #polygons for never-burned desert sites
st_transform(crs = 4326) %>% #transform data to wgs84 to match raster
filter(fireID %in% fireid)
fire_area <- crs(shapefile("shapefiles/fires/fires2000.shp"))
fire_area
fire_area <- shapefile("shapefiles/fires/fires2000.shp") %>%
filter(fireID %in% fireid)
fire_area <- crs(shapefile("shapefiles/fires/fires2000.shp")) %>% #polygons for never-burned desert sites
st_transform(crs = 4326) %>% #transform data to wgs84 to match raster
filter(fireID %in% fireid)
library(sf)
fire_area <- st_read("shapefiles/fires/fires2000.shp") %>% #polygons for never-burned desert sites
st_transform(crs = 4326) %>% #transform data to wgs84 to match raster
filter(fireID %in% fireid)
fire_area <- st_read("shapefiles/fires/fires2000.shp") %>% #polygons for never-burned desert sites
st_transform(crs = 4326) %>% #transform data to wgs84 to match raster
filter(fireID %in% fireid) %>%
st_area()
fire_area <- st_read("shapefiles/fires/fires2000.shp") %>% #polygons for never-burned desert sites
st_transform(crs = 4326) %>% #transform data to wgs84 to match raster
filter(fireID %in% fireid) %>%
st_area()
fire_area <- st_read("shapefiles/fires/fires2000.shp") %>% #polygons for never-burned desert sites
st_transform(crs = 4326) %>% #transform data to wgs84 to match raster
filter(fireID %in% fireid) %>%
aggregate()
fire_area <- st_read("shapefiles/fires/fires2000.shp") %>% #polygons for never-burned desert sites
st_transform(crs = 4326) %>% #transform data to wgs84 to match raster
filter(fireID %in% fireid)
fire_area_moj <- fire_area %>%
filter(desert == "Mojave")
fire_area_son <- fire_area %>%
filter(desert == "Sonoran")
fire_area_sj <- fire_area %>%
filter(desert == "San Joaquin")
aggregate(fire_area_moj)
st_geod_area(fire_area_moj)
install.packages("lwgeom")
library(lwgeom)
st_geod_area(fire_area_moj)
fire_area_moj$aream2 <- st_geod_area(fire_area_moj)
fire_area_moj <- fire_area %>%
filter(desert == "Mojave")
fire_area_moj <- fire_area %>%
filter(desert == "Mojave")
fire_area_moj$area_m2 <- st_geod_area(fire_area_moj)
sum(fire_area_moj$area_m2)
fire_area_moj$area_m2 <- st_geod_area(fire_area_moj) / 1000000
sum(fire_area_moj$area_m2)
fire_area_moj$area_km2 <- st_geod_area(fire_area_moj) / 1000000
fire_area_moj$area_km2 <- st_geod_area(fire_area_moj) / 1000000
sum(fire_area_moj$area_m2)
fire_area_sj$area_km2 <- st_geod_area(fire_area_sj) / 1000000
sum(fire_area_sjj$area_m2)
sum(fire_area_sj$area_m2)
fire_area_sj$area_km2 <- st_geod_area(fire_area_sj) / 1000000
sum(fire_area_sj$area_m2)
fire_area_son$area_km2 <- st_geod_area(fire_area_son) / 1000000
sum(fire_area_son$area_m2)
fire_area_sj <- fire_area %>%
filter(desert == "San Joaquin")
fire_area_moj <- fire_area %>%
filter(desert == "Mojave")
fire_area_son <- fire_area %>%
filter(desert == "Sonoran")
fire_area_moj$area_km2 <- st_geod_area(fire_area_moj) / 1000000
sum(fire_area_moj$area_m2)
fire_area_moj$area_km2 <- st_geod_area(fire_area_moj) / 1000000
sum(fire_area_moj$area_m2)
fire_area <- st_read("shapefiles/fires/fires2000.shp") %>% #polygons for never-burned desert sites
st_transform(crs = 4326) %>% #transform data to wgs84 to match raster
filter(fireID %in% fireid)
sum(fire_area_moj$area_km2)
sum(fire_area_sj$area_km2)
sum(fire_area_son$area_km2)
fire_area_moj$area_km2 <- st_geod_area(fire_area_moj) / 1000000
fire_area_sj$area_km2 <- st_geod_area(fire_area_sj) / 1000000
fire_area_son$area_km2 <- st_geod_area(fire_area_son) / 1000000
sum(fire_area_moj$area_km2)
sum(fire_area_sj$area_km2)
sum(fire_area_son$area_km2)
desert <- c("San Joaquin", "Mojave", "Sonoran")
area_km2 <- (sum(fire_area_sj$area_km2), sum(fire_area_moj$area_km2), sum(fire_area_son$area_km2))
area_km2 <- c(sum(fire_area_sj$area_km2), sum(fire_area_moj$area_km2), sum(fire_area_son$area_km2))
areas <- dataframe(desert, area_km2)
areas <- data.frame(desert, area_km2)
head(areas)
fire_area_sj <- fire_area %>%
filter(desert == "San Joaquin")
sum(fire_area_moj$area_km2)
sum(fire_area_sj$area_km2)
fire_area_moj$area_km2 <- st_geod_area(fire_area_moj) / 1000000
fire_area_sj$area_km2 <- st_geod_area(fire_area_sj) / 1000000
sum(fire_area_sj$area_km2)
fire_area_son$area_km2 <- st_geod_area(fire_area_son) / 1000000
sum(fire_area_son$area_km2)
class(sum(fire_area_son$area_km2))
as.numeric(sum(fire_area_son$area_km2))
as.numeric(sum(fire_area_moj$area_km2))
as.numeric(sum(fire_area_sj$area_km2))
as.numeric(sum(fire_area_son$area_km2))
fire_area_moj$area_km2 <- st_geod_area(fire_area_moj) / 1000000
as.numeric(sum(fire_area_moj$area_km2))
fire_area_sj$area_km2 <- st_geod_area(fire_area_sj) / 1000000
as.numeric(sum(fire_area_sj$area_km2))
as.numeric(sum(fire_area_sj$area_km2))
fire_area_son$area_km2 <- st_geod_area(fire_area_son) / 1000000
as.numeric(sum(fire_area_son$area_km2))
area_km2 <- c(as.numeric(sum(fire_area_sj$area_km2)),
as.numeric(sum(fire_area_moj$area_km2)),
as.numeric(sum(fire_area_son$area_km2)))
areas <- data.frame(desert, area_km2)
head(areas)
nb_area <- st_read("shapefiles/deserts/minus-fires/deserts-minus-fires.shp") %>% #polygons for never-burned desert sites
st_transform(crs = 4326) #transform data to wgs84 to match raster
areas <- data.frame(desert, area_km2) %>%
mutate(treatmentGroup = "burned")
head(areas)
area_km2 <- c(as.numeric(sum(nb_area_sj$area_km2)),
as.numeric(sum(nb_area_moj$area_km2)),
as.numeric(sum(nb_area_son$area_km2)))
nb_area <- st_read("shapefiles/deserts/minus-fires/deserts-minus-fires.shp") %>% #polygons for never-burned desert sites
st_transform(crs = 4326) #transform data to wgs84 to match raster
nb_area_sj <- fire_area %>%
filter(desert == "San Joaquin")
nb_area_moj <- fire_area %>%
filter(desert == "Mojave")
nb_area_son <- fire_area %>%
filter(desert == "Sonoran")
nb_area_moj$area_km2 <- st_geod_area(fire_area_moj) / 1000000
as.numeric(sum(fire_area_moj$area_km2))
nb_area_sj$area_km2 <- st_geod_area(fire_area_sj) / 1000000
as.numeric(sum(fire_area_sj$area_km2))
nb_area_son$area_km2 <- st_geod_area(fire_area_son) / 1000000
as.numeric(sum(fire_area_son$area_km2))
nb_area_moj$area_km2 <- st_geod_area(fire_area_moj) / 1000000
as.numeric(sum(nb_area_moj$area_km2))
as.numeric(sum(nb_area_moj$area_km2))
nb_area_moj$area_km2 <- st_geod_area(nb_area_moj) / 1000000
nb_area_moj$area_km2 <- st_geod_area(nb_area_moj) / 1000000
as.numeric(sum(nb_area_moj$area_km2))
nb_area_moj$area_km2 <- st_geod_area(nb_area_moj) / 1000000
as.numeric(sum(nb_area_moj$area_km2))
nb_area_sj <- nb_area %>%
filter(desert == "San Joaquin")
nb_area_moj <- nb_area %>%
filter(desert == "Mojave")
nb_area_son <- nb_area %>%
filter(desert == "Sonoran")
nb_area_moj$area_km2 <- st_geod_area(nb_area_moj) / 1000000
as.numeric(sum(nb_area_moj$area_km2))
nb_area_sj$area_km2 <- st_geod_area(nb_area_sj) / 1000000
as.numeric(sum(nb_area_sj$area_km2))
nb_area_son$area_km2 <- st_geod_area(nb_area_son) / 1000000
as.numeric(sum(nb_area_son$area_km2))
area_km2 <- c(as.numeric(sum(nb_area_sj$area_km2)),
as.numeric(sum(nb_area_moj$area_km2)),
as.numeric(sum(nb_area_son$area_km2)))
areas_nb <- data.frame(desert, area_km2) %>%
mutate(treatmentGroup = "never burned")
areas <- rbind(areas, areas_nb)
head(areas)
data <- left_join(data, areas, by = c("desert", "treatmentGroup"))
head(data)
data <- data %>% mutate(st_totalObs = (totalObs * 1000)/area_km2)
head(data)
ggplot(data, aes(x = obsYear, y = totalObs, color = desert)) +
geom_point() +
geom_line(aes(linetype = desert)) +
ylim(0, 1500) +
xlim(2000, 2020)
ggplot(data, aes(x = obsYear, y = totalObs, color = desert, shape = treatmentGroup)) +
geom_point() +
geom_line(aes(linetype = desert)) +
ylim(0, 1500) +
xlim(2000, 2020)
ggplot(data, aes(x = obsYear, y = st_totalObs, color = desert, shape = treatmentGroup)) +
geom_point() +
geom_line(aes(linetype = desert)) +
ylim(0, 1500) +
xlim(2000, 2020)
ggplot(data, aes(x = obsYear, y = st_totalObs, color = desert, shape = treatmentGroup)) +
geom_point() +
geom_line(aes(linetype = desert)) +
ylim(0, 15) +
xlim(2000, 2020)
ggplot(data, aes(x = obsYear, y = st_totalObs, color = desert, shape = treatmentGroup)) +
geom_point() +
ylim(0, 15) +
xlim(2000, 2020)
ggplot(data, aes(x = obsYear, y = st_totalObs, color = treatmentGroup, shape = desert)) +
geom_point() +
ylim(0, 15) +
xlim(2000, 2020)
write.csv(data, "data/data.csv")
write.csv(data, "data/animal_observations_2022.csv")
model <- bam(totalObs ~ obsYear, data = data)
plot(model, which = 1)
model <- bam(st_totalObs ~ obsYear, data = data)
plot(model, which = 1)
summary(model)
plot(model)
ggplot(data, aes(x = obsYear, y = st_totalObs, color = treatmentGroup, shape = desert)) +
geom_point() +
ylim(0, 15) +
xlim(2000, 2020)
ggplot(data, aes(x = obsYear, y = st_totalObs, color = treatmentGroup, shape = desert)) +
geom_point() +
ylim(0, 15) +
xlim(2000, 2020) +
facet_wrap(~desert)
ggplot(data, aes(x = obsYear, y = st_totalObs, color = treatmentGroup, shape = desert)) +
geom_point() +
ylim(0, 15) +
xlim(2000, 2020) +
facet_wrap(~desert, nrows = 3)
ggplot(data, aes(x = obsYear, y = st_totalObs, color = treatmentGroup, shape = desert)) +
geom_point() +
ylim(0, 15) +
xlim(2000, 2020) +
facet_grid(~desert, rows = 3)
ggplot(data, aes(x = obsYear, y = st_totalObs, color = treatmentGroup, shape = desert)) +
geom_point() +
ylim(0, 15) +
xlim(2000, 2020) +
facet_grid(vars(desert), rows = 3)
ggplot(data, aes(x = obsYear, y = st_totalObs, color = treatmentGroup, shape = desert)) +
geom_point() +
ylim(0, 15) +
xlim(2000, 2020) +
facet_grid(vars(desert))
ggplot(data, aes(x = obsYear, y = ndvi, color = treatmentGroup, shape = desert)) +
geom_point() +
ylim(0, 15) +
xlim(2000, 2020) +
facet_grid(vars(desert))
ggplot(data, aes(x = obsYear, y = ndvi, color = treatmentGroup, shape = desert)) +
geom_point() +
ylim(-1, 1) +
xlim(2000, 2020) +
facet_grid(vars(desert))
ggplot(data, aes(x = obsYear, y = st_totalObs, color = treatmentGroup, shape = desert)) +
geom_point() +
ylim(0, 15) +
xlim(2000, 2020) +
facet_grid(vars(desert))
ggplot(data, aes(x = obsYear, y = st_totalObs, color = treatmentGroup, shape = desert)) +
geom_point() +
ylim(0, 15) +
xlim(2000, 2020) +
facet_grid(vars(desert)) +
ylab("total observations per 1000km^2")
ylim(0, 15) +
xlim(2000, 2020) +
facet_grid(vars(desert)) +
ylab("total observations per 1000km^2")
ggplot(data, aes(x = obsYear, y = st_totalObs, color = treatmentGroup, shape = desert)) +
geom_point() +
geom_smooth(aes(weight = ndvi), method = lm) +
ylim(0, 15) +
xlim(2000, 2020) +
facet_grid(vars(desert)) +
ylab("total observations per 1000km^2")
ggplot(data, aes(x = obsYear, y = st_totalObs, color = treatmentGroup, shape = desert)) +
geom_point() +
geom_smooth(aes(weight = ndvi), method = gam) +
ylim(0, 15) +
xlim(2000, 2020) +
facet_grid(vars(desert)) +
ylab("total observations per 1000km^2")
ggplot(data, aes(x = obsYear, y = st_totalObs, color = treatmentGroup, shape = desert)) +
geom_point(aes(weight = ndvi)) +
geom_smooth(aes(weight = ndvi), method = gam) +
ylim(0, 15) +
xlim(2000, 2020) +
facet_grid(vars(desert)) +
ylab("total observations per 1000km^2")
ggplot(data, aes(x = obsYear, y = st_totalObs, color = treatmentGroup, shape = desert, weight = ndvi)) +
geom_point() +
geom_smooth(aes(weight = ndvi), method = gam) +
ylim(0, 15) +
xlim(2000, 2020) +
facet_grid(vars(desert)) +
ylab("total observations per 1000km^2")
ggplot(data, aes(x = obsYear, y = st_totalObs, color = treatmentGroup, shape = desert)) +
geom_point() +
geom_smooth(aes(weight = ndvi), method = gam) +
ylim(0, 15) +
xlim(2000, 2020) +
facet_grid(vars(desert)) +
ylab("total observations per 1000km^2")
